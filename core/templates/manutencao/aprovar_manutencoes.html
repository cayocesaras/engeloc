{% extends 'base.html' %}

{% block title %}Aprovar Manutenção{% endblock %}

{% block content %}
<div class="content" id="content">
  <h3 class="mt-4">Aprovar Manutenção</h3>

  <br><br>

  <div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active">
      <table id="datatable" class="table table-striped table-bordered">
        <thead>
          <tr>
            <th>Número O.S.</th>
            <th>Produto</th>
            <th>Tipo Manutenção</th>
            <th>Início</th>
            <th>Fim</th>
            <th>Visualizar</th>
            <th>Aprovar</th>
            <th>Editar</th>
            <th>Excluir</th>
          </tr>
        </thead>
        <tbody>
          {% for manutencao in manutencoes %}
          <tr>
            <td>{{ manutencao.id }}</td>
            <td>{{ manutencao.produto }}</td>
            <td>{{ manutencao.observacoes }}</td>
            <td>{{ manutencao.data_inicio|date:"d/m/Y" }}</td>
            <td>{{ manutencao.status }}</td>
            <td>
              <a href="{% url 'visualizar_manutencao' manutencao.id %}" class="btn btn-primary btn-sm">
                <i class="bi bi-eye"></i>
              </a>
            </td>
            <td>
              <a href="{% url 'aprova_manutencao' manutencao.id %}"
                class="btn btn-error btn-sm">
                <i class="bi bi-hand-thumbs-up-fill"></i>
              </a>
            </td>
            <td>
              <form method="POST" action="{% url 'manutencoes' %}">
                {% csrf_token %}
                <input type="hidden" name="id" value="{{ manutencao.codigo }}">
                <button type="submit" name="Acao" value="alterar_form" class="btn btn-sm">
                  <i class="bi bi-pencil-square"></i>
                </button>
              </form>
            </td>
            <td>
              <form method="POST" action="{% url 'manutencoes' %}">
                {% csrf_token %}
                <input type="hidden" name="id" value="{{ manutencao.id }}">
                <button type="submit" name="Acao" value="excluir" class="btn btn-sm"
                        onclick="return confirm('Tem certeza que deseja excluir este registro?');">
                  <i class="bi bi-trash"></i>
                </button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}